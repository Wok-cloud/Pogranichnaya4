var filter={init:function(){var e=this;e.openOptions(),e.openCloseMobFilter(),e.send(),e.rangeOption($(".js-filters .js-filter-range")),e.showMoreOptions(),e.smartfilterRefreshHideParams(),e.clearSelectedFilter(),e.initFilterSubcategory()},openOptions:function(){$(".js-filter-title").on("click",function(){var e=$(this).closest(".js-filter-item"),a=e.find(".js-filter-options");a.is(":visible")?(a.slideUp(),e.addClass("close")):(a.slideDown(),e.removeClass("close"))})},openCloseMobFilter:function(){var e=$(".js-mobile-filter-head"),a=$(".js-mobile-filter-body");e.on("click",function(){a.toggle(),e.hasClass("filter-open")?e.removeClass("filter-open"):e.addClass("filter-open")})},send:function(){$(".js-filters.js-ajax form input").change(function(){var e=$(this).closest("form");productList.ajaxUpdateListFormFields(e.serializeArray())}),$(".js-filters.js-ajax form").submit(function(){var e=$(this);return productList.ajaxUpdateListFormFields(e.serializeArray()),!1})},rangeOption:function(e){e.each(function(){if(!$(this).find(".js-slider-range").length){$(this).append('<div class="js-slider-range"></div>');var e=$(this).find(".js-min"),a=$(this).find(".js-max"),t=parseFloat(e.attr("placeholder")),i=parseFloat(a.attr("placeholder")),s=1,r=$(this).find(".js-slider-range");if(r.data("step"))s=parseFloat(r.data("step"));else{var n=i-t;if(Math.round(t)!=t||Math.round(i)!=i){s=n/10;for(var o=0;s<1;)s*=10,o+=1;s=Math.pow(10,-o),o=Math.round(1e5*Math.abs(Math.round(t)-t))/1e5,o&&o<s&&(s=o),o=Math.round(1e5*Math.abs(Math.round(i)-i))/1e5,o&&o<s&&(s=o)}}r.slider({range:!0,min:parseFloat(e.attr("placeholder")),max:parseFloat(a.attr("placeholder")),step:s,values:[parseFloat(e.val().length?e.val():e.attr("placeholder")),parseFloat(a.val().length?a.val():a.attr("placeholder"))],slide:function(t,i){var s=i.values[0]==$(this).slider("option","min")?"":i.values[0];e.val(s),s=i.values[1]==$(this).slider("option","max")?"":i.values[1],a.val(s)},stop:function(a,t){e.change()}}),e.add(a).change(function(){var t=""===e.val()?r.slider("option","min"):parseFloat(e.val()),i=""===a.val()?r.slider("option","max"):parseFloat(a.val());i>=t&&r.slider("option","values",[t,i])})}})},showMoreOptions:function(){$(".js-filter-options-show-all").click(function(e){e.preventDefault();var a=$(this),t=a.closest(".js-filter-options"),i=t.find(".js-filter-options-el");i.is(":hidden")?(i.removeClass("hide"),a.addClass("open")):(i.addClass("hide"),a.removeClass("open"))})},smartfilterRefreshHideParams:function(){void 0!==$.smartfiltersTheme&&setTimeout(function(){var e=$(".js-filter-options-show-all");$(".js-filters").data("smartfilters-hide-option")&&e.each(function(){var e=$(this),a=e.hasClass("open"),t=parseInt(e.data("max-show-params")),i=e.closest(".js-filter-item").find("label"),s=0;t&&(e.hide(),i.each(function(){var i=$(this);i.removeClass("js-filter-options-el").removeClass("hide"),i.hasClass("sf-label-disabled")&&i.is(":hidden")||s++,s>t&&(e.show(),i.addClass("js-filter-options-el"),a||i.addClass("hide"))}))}),$(".js-filter-body").find('input[type="checkbox"], input[type="radio"], .js-select').trigger("refresh")},500)},clearSelectedFilter:function(){var e=this;$("body").on("click",".js-filter-selected-remove",function(){var a=$(this).data("code");$(".js-filters").length&&(e.clearFilterItem(a),productList.ajaxUpdateListFormFields($(".js-filters form").serializeArray()))})},clearFilterItem:function(e){var a=this,t=$(".js-filters").find(".js-filter-item[data-code='"+e+"']");t.find('input[type="checkbox"], input[type="radio"]').prop("checked",!1).trigger("refresh"),t.find('input[type="text"]').val(""),$(".js-filters .js-slider-range").remove(),a.rangeOption($(".js-filters .js-filter-range"))},addFilterSubcategory:function(e){var a=$(".js-category-subcategories"),t=a.data("save-filters"),i=a.data("save-filters-aliases"),s=e,r=a.find(".js-category-link");if(t)if(i&&(i=i.split(","),i.length>0&&(s=[],e.forEach(function(e){i.indexOf(e.name.replace("[]",""))>=0&&s.push(e)}))),s.length){var n=filter.buildUrl(s);r.length&&(n.length<2&&(n=""),r.each(function(){var e=$(this).attr("href");e=e.split("?")[0],$(this).attr("href",e+n)}))}else r.each(function(){var e=$(this).attr("href");e=e.split("?")[0],$(this).attr("href",e)})},initFilterSubcategory:function(){var e=this,a=$(".js-filters form");a.length&&e.addFilterSubcategory(a.serializeArray())},buildUrl:function(e){for(var a=[],t=0;t<e.length;t++)""!==e[t].value&&a.push(e[t].name+"="+e[t].value);return"?"+a.join("&")}},productList={init:function(){var e=this;e.switchProductListView(),e.setCountPerPageProducts(),e.pagination(),e.paginationPageAjax(),window.addEventListener("popstate",function(e){location.reload()})},switchProductListView:function(){var e=this,a={expires:7,path:"/"},t=$(".js-switch-pr-view");$("body").on("click",".js-switch-pr-view",function(){var i=$(this),s=i.data("view");s&&$.cookie("CategoryProductsView",s,a);$(".js-filters.js-ajax form");e.ajaxUpdateList(window.location.search),t.removeClass("selected"),i.addClass("selected")})},setCountPerPageProducts:function(){$("#set-per-page").change(function(){var e=$(this),a=e.val(),t={expires:7,path:"/"};$.cookie("products_per_page",a,t);var i=window.location.href.replace(/(page=)\w+/g,"page=1");window.location.href=i})},pagination:function(){var e=this,a=$('.js-paging-nav[data-lazyload="1"]').length,t=$(".js-paging-load-else").length&&$(".js-paging-load-else").is(":visible");e.pagingElse(),a&&!t&&e.lazyloading()},paginationPageAjax:function(){var e=this;$("body").on("click",".js-pagination-ajax a",function(a){var t=$(".js-product-list-ajax .js-category-list");if(t.length){a.preventDefault();var i=$(this).attr("href"),s=t.offset().top-90;e.ajaxUpdateList(i,!0),$("html,body").animate({scrollTop:s},500)}})},lazyloading:function(){if($.fn.lazyLoad){var e=$('.js-paging-nav[data-lazyload="1"]');if(!e.length)return;var a=e.find("li.selected"),t=a.next(),i=$(window);i.lazyLoad("stop"),t.length&&i.lazyLoad({container:".js-product-list-ajax .js-category-list",load:function(){i.lazyLoad("sleep");var e=$('.js-paging-nav[data-lazyload="1"]'),a=e.find("li.selected"),t=a.next(),s=t.find("a").attr("href");if(!s)return void i.lazyLoad("stop");var r=$(".js-product-list-ajax .js-category-list"),n=e.parent().find(".loading");n.length||(n=$('<div class="lazyloading-paging-loader"><i class="icon32 loading"></i></div>').insertAfter(".js-product-list-ajax")),$(".js-paging-load-else").hide(),$(".js-pagination").hide(),n.show(),$.get(s+"&_="+(new Date).getTime()+Math.random(),function(a){var t=$("<div></div>").html(a);productsPreviewList.images(t.find(".js-preview-products")),r.append(t.find(".js-product-list-ajax .js-category-list").children());var o=t.find('.js-paging-nav[data-lazyload="1"]');e.replaceWith(o),e=o;var l=e.find("li.selected"),d=l.next();history.pushState&&void 0!==history.state&&window.history.pushState({},"",s),d.length?i.lazyLoad("wake"):i.lazyLoad("stop"),productTile.init(),void 0!==$.autobadgeFrontend&&$.autobadgeFrontend.reinit(),void 0!==$.pluginprotilegallery&&$.pluginprotilegallery.lazyload(),e.find(".js-paging-load-else").hide(),e.find(".js-pagination").hide(),n.hide(),t.remove()})}})}},pagingElse:function(e){var a=this;$("body").on("click",".js-paging-load-else",function(){var e=$(this),t=e.data("after-lazyload"),i=e.closest(".js-paging-nav"),s=i.find(".js-pagination .selected"),r=s.next(),n=r.find("a").attr("href"),o=e.closest(".js-product-list-ajax").find(".js-category-list");e.addClass("loading"),n&&($(window).lazyLoad&&$(window).lazyLoad("sleep"),$.get(n+"&_="+(new Date).getTime()+Math.random(),function(s){var r=$("<div></div>").html(s);productsPreviewList.images(r.find(".js-preview-products")),o.append(r.find(".js-product-list-ajax .js-category-list").children()),i.html(r.find(".js-paging-nav").html()),e.removeClass("loading"),t&&a.lazyloading(),history.pushState&&void 0!==history.state&&window.history.pushState({},"",n),void 0!==$.autobadgeFrontend&&$.autobadgeFrontend.reinit()}))})},ajaxUpdateListFormFields:function(e){var a=this,t=filter.buildUrl(e);a.ajaxUpdateList(t,!0),filter.addFilterSubcategory(e)},ajaxUpdateList:function(e,a){var t=$(".js-product-list-ajax"),i=$(".js-product-list-ajax-loader");$(window).lazyLoad&&$(window).lazyLoad("sleep"),t.html(""),i.show();var s=e.indexOf("?")<0?e+"?_":e;s+="&_=_"+(new Date).getTime()+Math.random(),$.get(s,function(s){var r=$("<div></div>").html(s);t.html(r.find(".js-product-list-ajax").html()),productsPreviewList.images(t.find(".js-preview-products")),i.hide(),history.pushState&&void 0!==history.state&&a&&("?"==e&&(e=window.location.pathname),window.history.pushState({},"",e)),$(window).lazyLoad&&$(window).lazyLoad("reload"),productTile.init(),void 0!==$.autobadgeFrontend&&$.autobadgeFrontend.reinit(),void 0!==$.pluginprotilegallery&&$.pluginprotilegallery.lazyload(),filter.smartfilterRefreshHideParams()})}},countdown={init:function(){$(".js-promo-countdown").each(function(){var e=$(this),a=e.data("end"),t=e.data("day-text"),i=e.data("wrap");e.countdown(a,function(a){i?(e.find(".js-countdown-days").html(a.strftime("%D")),e.find(".js-countdown-hours").html(a.strftime("%H")),e.find(".js-countdown-minutes").html(a.strftime("%M")),e.find(".js-countdown-seconds").html(a.strftime("%S"))):e.text(a.strftime("%D "+t+" %H:%M:%S"))})})}},brandsCarousel={brandsWrap:$(".js-brands-carousel"),init:function(){var e=this;if(!e.brandsWrap.length)return!1;e.prepareBrandsCarousels(),e.carouselInteraction(),$(window).one("resize",e.brandsCarousel)},prepareBrandsCarousels:function(){var e=this,a=e.brandsWrap.find(".owl-carousel"),t=a.outerWidth(!0),i=e.brandsWrap.find(".js-brands-mainpage-el"),s=i.length;if(i.first().outerWidth(!0)*s>t){var r=e.brandsWrap.find(".js-brands-mainpage-direction");r.append('<button data-index="prev" class="js-carousel-brands-on-initialized owl-prev disabled"></button>'),r.append('<button data-index="next" class="js-carousel-brands-on-initialized owl-next"></button>')}var n=a.offset().left+a.outerWidth();i.slice(0,6).each(function(){$(this).offset().left<n&&$(this).find(".owl-lazy").Lazy({afterLoad:function(e){e.removeClass("owl-lazy")}})})},carouselInteraction:function(){var e=this;$(".js-carousel-brands-on-initialized").on("click",function(){e.brandsCarousel($(this).data("index"))}),is_touch_device()&&e.brandsWrap.find(".owl-carousel").swipe({allowPageScroll:"auto",threshold:20,swipe:function(e,a,t,i,s,r){"left"==a?brandsCarousel.brandsCarousel("next"):"right"==a&&brandsCarousel.brandsCarousel("prev")}})},brandsCarousel:function(e){if(brandsCarousel.brandsWrap.hasClass("carousel-init"))return!1;var a=brandsCarousel.brandsWrap.find(".owl-carousel"),t=brandsCarousel.brandsWrap.find(".js-brands-mainpage-direction");a.owlCarousel({loop:!1,margin:0,nav:!0,navContainer:t,navText:["",""],lazyLoad:!0,dots:!1,responsive:{0:{items:1},401:{items:2},801:{items:3},1001:{items:4},1201:{items:5}},onInitialize:function(e){brandsCarousel.brandsWrap.find(".js-carousel-brands-on-initialized").remove()},onInitialized:function(e){brandsCarousel.brandsWrap.addClass("carousel-init")}}),e&&("prev"==e?a.trigger("prev.owl.carousel"):"next"==e&&a.trigger("next.owl.carousel"))}},categories={init:function(){var e=this;e.sidebar(),e.sidebarCategoriesImages()},sidebar:function(){this.sidebarInit(),$(".js-subcat-open").click(function(){var e=$(this),a=$(e.parent().find(".js-subcat")[0]);a.is(":visible")?(a.slideUp(),e.removeClass("selected")):(a.slideDown(),e.addClass("selected"))})},sidebarInit:function(){var e=$(".js-sidebar-cats"),a=e.find("[data-is-open]"),t=a.parents(".js-subcat");t.removeClass("hide"),t.each(function(){$(this).parent().find(".js-subcat-open").first().addClass("selected")})},sidebarCategoriesImages:function(){var e=$(".js-sidebar-cats"),a=e.data("lazy"),t=e.data("retina");a?categoriesImages.lazyImages(e.find(".js-sidebar-cat-image"),t):t&&categoriesImages.retinaImages(e.find(".js-sidebar-cat-image"))}},categoryText={readMore:function(){var e=$(".js-category-text-wrap"),a=e.data("max-height"),t=$(".js-category-text");if($(".js-category-text-more-wrap").remove(),e.removeClass("close"),e.length&&a&&e.css("max-height",a+"px"),e.length&&t.length&&e.outerHeight()<t.outerHeight()){var i=e.data("text-more"),s=e.data("text-hide");e.addClass("close"),e.after("<div class='js-category-text-more-wrap category-text-more-wrap'><span class='js-category-text-more category-text-more sd-color link-half'>"+i+"</span></div>"),$(".js-category-text-more").on("click",function(){var r=$(this);r.hasClass("open")?(r.removeClass("open"),e.addClass("close"),r.text(i),e.animate({maxHeight:a},500)):(e.animate({maxHeight:t.outerHeight()+"px"},500),r.addClass("open"),e.removeClass("close"),r.text(s))})}else e.removeAttr("style")}},reviews={reviewsWrap:$(".js-reviews-carousel"),init:function(){var e=this;if(!e.reviewsWrap.length)return!1;e.prepareReviewsCarousels(),e.carouselInteraction(),$(window).one("resize",reviews.reviewsCarousel)},prepareReviewsCarousels:function(){var e=this,a=e.reviewsWrap.find(".owl-carousel"),t=a.outerWidth(),i=e.reviewsWrap.find(".js-home-reviews-item"),s=i.length;if(i.first().outerWidth(!0)*s>t+20){var r=e.reviewsWrap.find(".js-reviews-carousel-direction");r.append('<button data-index="prev" class="js-carousel-reviews-on-initialized owl-prev disabled"></button>'),r.append('<button data-index="next" class="js-carousel-reviews-on-initialized owl-next"></button>')}var n=a.offset().left+a.outerWidth();i.slice(0,2).each(function(){$(this).offset().left<n&&$(this).find(".owl-lazy").Lazy({afterLoad:function(e){e.removeClass("owl-lazy")}})})},carouselInteraction:function(){var e=this;$(".js-carousel-reviews-on-initialized").on("click",function(){e.reviewsCarousel($(this).data("index"))}),is_touch_device()&&e.reviewsWrap.find(".owl-carousel").swipe({allowPageScroll:"auto",threshold:20,swipe:function(e,a,t,i,s,r){"left"==a?reviews.reviewsCarousel("next"):"right"==a&&reviews.reviewsCarousel("prev")}})},reviewsCarousel:function(e){if(reviews.reviewsWrap.hasClass("carousel-init"))return!1;var a=reviews.reviewsWrap.find(".owl-carousel"),t=reviews.reviewsWrap.find(".js-reviews-carousel-direction");a.owlCarousel({loop:!1,margin:20,nav:!0,dots:!1,navText:["",""],navElement:"div",navContainer:t,responsive:{0:{items:1},901:{items:2},1201:{items:3}},autoHeight:!0,lazyLoad:!0,onInitialize:function(e){reviews.reviewsWrap.find(".js-carousel-reviews-on-initialized").remove()},onInitialized:function(e){reviews.reviewsWrap.addClass("carousel-init")},onLoadedLazy:function(e){var a=$(e.currentTarget);a.length&&$.Retina&&a.find(".owl-item.active .owl-lazy").retina()}}),e&&("prev"==e?a.trigger("prev.owl.carousel"):"next"==e&&a.trigger("next.owl.carousel"))}};$(document).ready(function(){filter.init(),productList.init(),countdown.init(),brandsCarousel.init(),categories.init(),categoryText.readMore(),reviews.init()}),$(function(){void 0===window.seofilterOnFilterSuccessCallbacks&&(window.seofilterOnFilterSuccessCallbacks=[]),window.seofilterOnFilterSuccessCallbacks.push(function(){$(".js-filter-body").find('input[type="checkbox"], input[type="radio"], .js-select').trigger("refresh"),categoryText.readMore()})});